---
layout: post
title: "운영체제"
subtitle: "컴퓨터과학 개론 정리"
date: 2019-11-30 19:21:00 +0900
background: '/img/posts/06.jpg'
---

# 운영체제의 개념
### 운영체제의 개요
> 운영체제는 하드웨어와 응용 프로그램 혹은 컴퓨터 사용자 사이의 인터페이스를 제공하는 시스템 소프트웨어이다.  

<img class="img-fluid" src='{{"/img/posts/191130/5.1.png" | relative_url}}' alt="컴퓨터 시스템과 운영체제와의 관계">

운영체제는 관리대상인 자원의 범주에 프로세서 관리자, 주기억장치 관리자, 장치 관리자, 파일 관리자의 역할을 수행한다.  

- 프로세스 관리자
    - 프로세스는 중앙처리장치에서 실행 중인 프로그램 또는 작업으로 정의할 수 있다.
    - 프로세서에는 기본적으로 중앙처리장치와 주기억장치가 할당되어야 한다.
    - 프로세서 관리자(운영체제)는 프로세스에 중앙처리장치와 주기억장치의 할당과 관리를 담당하며, 이를 위해 각 프로세스의 상태를 모니터링한다.
- 주기억장치 관리자
    - 프로세스에 주기억장치를 할당하고 프로세스로부터 할당된 주기억장치를 회수한다.
    - 제한된 주기억장치를 여러 프로세스가 나누어 사용하기 위해 다양한 주기억장치 관리 기법이 활용된다.
    - 주기억장치 관리자(운영체제)도 주기억장치를 할당받고 상주하면서, 주기억장치 관리자에 의해 보호되고 관리된다.
- 장치 관리자
    - 시스템 개발자에 의해 구현된 운영체제의 스케줄링 기법에 따라 디스플레이, 키보드 등과 같은 시스템의 모든 장치를 가장 효율적으로 관리하고 동작시키며, 프로세스에 할당된 장치를 반환하여 다른 프로세스가 사용할 수 있도록 한다.
- 파일 관리자
    - 컴파일러, 인터프리터, 유틸리티와 같은 시스템 프로그램과 각종 응용 프로그램, 그리고 데이터 파일 등의 모든 파일에 대한 읽기와 쓰기 동작을 관리한다.
    - 파일에 대한 프로세스의 접근을 관리하여 데이터 보호를 보장하며, 파일을 위한 컴퓨터 자원의 할당과 회수 등을 수행한다.

### 운영체제의 처리 방식
1. 일괄처리 시스템(batch processing system)  
일괄처리 시스템은 처리할 작업이 발생할 대마다 즉각적으로 처리하지 않고 처리해야할 작업이 일정량에 도달하면 작업을 한꺼번에 처리하는 방식이다.
2. 다중 프로그래밍 시스템(multiprogramming system)  
다중 프로그램 시스템은 여러 개의 프로그램을 효율적으로 실행시키기 위해 여러 컴퓨터 자원을 관리한다. 즉, CPU를 사용하고 있는 A가 CPU의 사용을 멈추가 입출력장치를 사용하게 되면, 아무도 사용하지 않는 CPU를 다른 작업 B에 할당한다.
3. 시분할처리 시스템(time-sharing processing system)  
대화식 작업에서 사용자와 컴퓨터는 네트워크를 통해 상호작용을 하므로 컴퓨터가 사용자의 요구를 빠르게 처리해 줄 것을 요구한다. 이런 요구사항으로 나온 것이 시분할처리 시스템으로 이 시스템은 CPU의 시간을 일정 간격의 작은 시간으로 쪼개서 각 사용자에게 시간 간격을 할당한다. 그리고 그동안 직접 컴퓨터와 대화식으로 작업을 수행할 수 있도록 개발되었다.

# 운영체제의 주기억장치 관리
### 기억장치의 구성
컴퓨터 시스템에서 사용되는 기억장치는 접근 속도, 비용 및 장치의 용량에 따라 다음과 같이 계층적으로 구성된다.  
<img class="img-fluid" src='{{"/img/posts/191130/5.2.png" | relative_url}}' alt="기억장치의 계층구조">

CPU가 사용하려는 프로그램 코드와 데이터는 CPU 레지스터나 캐시기억장치에 있어야 한다. 하지만 레지스터나 캐시기억장치의 용량의 한계로 인해 주기억장치에도 저장된 프로그램 코드나 데이터에 접근할 수밖에 없다. 프로그램이나 데이터의 크기는 일반적으로 주기억장치보다 크기 때문에 당장 필요하지 않은 프로그램 코드나 데이터는 사용될 때 까지 보조기억장치에 저장해 놓고, 이에 대한 실행이나 참조가 발생하는 시점에 주기억장치로 이동된다.

CPU와 주기억장치의 속도차이로 인한 지연문제를 방지하기 위해 캐시를 이용한다. 따라서 CPU가 어떤 프로그램 코드나 데이터가 필요한 경우 우선적으로 캐시 저장소를 검색하며, 만약 캐시 저장소에 없는 경우 주기억장치를 탐색하게 된다(주기억 장치에서 가져갈 경우 차후의 사용을 위해 캐시 저장소에도 복사한다).

### 주기억장치의 할당
1. 단일 사용자 연속 기억장치 할당  
하나의 사용자 프로그램만이 전체 주기억장치에 할당되는 방식이며 실행될 프로그램이 주기억장치의 용량을 초과하면 실행할 수 없다. 단순하여 구현이 쉽지만 큰 프로그램을 수행할 수 없다. 또한, 하나의 프로그램이 모든 자원을 할당받아 사용하기 때문에 유휴 자원에 대한 낭비가 심하다.
2. 고정 분할 다중 프로그래밍 기법  
단일 사용자 연속 기억장치 기법의 단점인 하나의 프로그램만 실행가능하다는 점을 보완하기 위해 개발 되었다. 주기억장치를 여러 개의 고정된 크기의 영역으로 분할하고, 실행 중인 여러 개의 프로세스에 각각 할당하는 기법이다. 여러 프로그램들 간의 잘못된 참조 방지를 위한 메모리 보호 기법이 필요하고, 사용자 프로그램에 분할 영역에 정확히 맞지 않아 단편화가 발생할 수 있다.
3. 동적 분할 프로그래밍 기법  
고정 분할 다중 프로그래밍 기법의 단편화를 해결하기 위해 나온 기법으로 프로그램이 주기억장치에 적재될 때마다 모든 작업이 필요로 하는 크기만큼 연속된 공간을 할당해주는 기법. 하지만 시간이 지남에 따라 외부 단편화(영역의 크기가 너무 작아서 어떤 작업에도 할당되지 못하고 비어있는 상태)가 발생한다. 낭비되는 현상을 막기 위한 방법으로 인접된 공백을 합쳐 더 큰 공백을 만드는 통합과, 주기억장치 내의 흩어진 모든 공백을 하나로 합쳐 커다란 공백을 만드는 집약 등이 있다.

### 가상기억장치
> 가상기억장치란 주기억장치에서 이용가능한 영역보다 큰 프로그램을 작은 단위로 쪼개어 실행시키기 위해 보조기억장치의 주소를 주기억장치의 주소로 변환하여 프로그램에 제공되는 가상의 기억장치를 말하며, 보조기억장치의 주소를 주기억장치의 주소로 변환하는 기법을 가상기억장치 관리 기법이라고 한다.

가상기억장치를 구현하는 가장 일반적인 방법으로는 페이징 기법과 세그먼테이션 기법이 있다.
1. 페이징 기법  
페이징 기법은 보조기억장치로부터 프로그램 코드나 데이터를 페이지라고 불리는 동일한 크기의 블록으로 쪼개어서 주기억장치에 적재하여 접근하는 기법. 이때 주기억장치도 페이지 크기와 같은 크기로 분할되며 이를 주기억장치의 페이지 프레임이라고 부른다.

2. 세그먼테이션 기법
세그먼테이션 기법은 프로그램 코드나 데이터를 일정하지 않은 서로 다른 크기로 분할하여 주기억장치에 적재하여 접근한다. 프로그램 코드나 데이터를 서로 다른 크기로 분할한 블록을 세그먼트라고 부른다.

가상기억장치 관리를 위해서 페이지나 세그먼트를 보조기억장치로부터 주기억장치에 적재하는 방법은 다음과 같다.
1. 페이지 반입 기법
    - 요구 페이지 반입 기법
        - 프로세스가 필요한 페이지의 요구가 있을 때만 주기억장치로 페이지를 옮기는 기법
    - 예상 페이지 반입 기법
        - 현재 실행 프로세스가 필요할 것으로 예상되는 페이지를 미리 주기억장치에 적재시켜서 필요한 경우 즉시 사용할 수 있도록 하는 기법
2. 배치 기법  
배치 기법은 보조기억장치에 있는 프로그램 코드나 데이터를 적재할 주기억장치의 위치를 결정하는 것이다.
    - 페이지
        - 페이징 기법은 일정한 크기의 페이지가 주기억장치의 어떤 페이지 프레임에 들어갈 수 있다. 따라서 특별한 배치 기법이 필요하지 않다.
    - 세그먼테이션  
    세그먼트와 주기억장치의 가용 용량의 차이가 발생하기 때문에 아래 두 가지 방법이 필요하다. 
        - 최초적합
            - 주기억장치에 존재하는 여러 개의 세그먼트 중에서 가장 먼저 나타나는 세그먼트에 새로운 세그먼트를 적재하는 방법
        - 최적적합
            - 주기억장치에 존재하는 여러 개의 세그먼트 중에서 가장 크기 차이가 적은 세그먼트에 새로운 세그먼트를 적재하는 방법

3. 교체 기법  
교체 기법은 주기억장치에 적재되어야 할 새로운 페이지를 위하여 주기억장치에 공간을 마련하기 위해, 이미 적재된 페이지 중에서 보조기억장치로 보내야 할 페이지를 결정하는 기법이다. 교체 기법은 무작위 페이지 교체기법, FIFO rlqjq emddl dlTek.

# 프로세서 관리
> 주기억장치를 프로세스에 할당하는 기법이 필요한 것처럼 중앙처리장치를 프로세스에 할당하는 기법이 필요하다. 프로세서 관리자는 단일 CPU에 프로세스 할당하는 방법과 시간을 결정한다.

### 프로세스 개념
> 프로세스는 실행 상태에 있는 프로그램이며, 프로그램은 보조기억장치에 저장된 상태의 수동적 객체이다. 즉, 프로그램이 주기억장치에 적재되고 중앙처리장치를 할당받아 실행될 명령어로 변경되어 다양한 작업을 수행할 수 있는 능동적 객체를 나타낸다.

하나의 프로세스가 시스템 내에 존재하는 동안 그 프로세서는 종료될 때까지 생성, 준비, 실행, 대기, 종료와 같은 다섯 개의 상태 중 한 상태에 있게 된다.

### 중앙처리장치 스케줄링 기법
프로세스 스케줄링 알고리즘의 형태는 크게 선점 스케줄링 기법과 비선점 스케줄링 기법으로 구분된다. 선점 스케줄링 기법이란 이미 중앙처리장치를 점유하여 실행 중인 프로세스를 내보내고 다른 프로세스에 중앙처리장치를 할당하는 스케줄링 기법이다. 비선점 스케줄링 기법은 일단 프로세스에 중앙처리장치가 할당되어 프로세스의 실행이 시작되면 프로세스 스스로가 입출력 인터럽트를 걸거나 프로세스가 종료될 때까지 중앙처리장치를 다른 프로세스에 양보하지 않는 기법이다.

1. 기한부 스케줄링  
기한이 되면 중앙처리장치를 양보해야 하므로 비선점 스케줄링 기법이고, 프로세스가 주어진 시간 내에 완료되면 중간에 중앙처리장치를 양보할 필요가 없다. 작업에 필요한 정확한 자원의 예측과 안배가 계획하기 어렵고 오버헤드가 크고 복잡하다.
2. 우선순위 스케줄링  
우선순위가 높은 프로세스부터 먼저 처리하는 방식으로 비선점 스케줄링 기법이다. 우선순위는 여러 요인에 의해 결정된다.
3. FCFS 스케줄링
FCFS(First-Come First-Served) 스케줄링(또는 FIFO 스케줄링이라고도 함)은 비선점 스케줄링이며 준비 큐에 도착한 순서대로 중앙처리장치를 할당받도록 해주는 기법이다.
4. SJF 스케줄링
SJF(Shortest Job First)는 현재 준비 큐에 있는 프로세스들 중에서 수행시간이 가장 짧을 것으로 예상되는 프로세스를 먼저 처리하는 비선점 방식의 스케줄링 기법이다.
5. RR 스케줄링  
RR(Round Robin) 스케줄링 기법은 대화형 시스템에 사용되는 선점형 스케줄링 방식이다. 프로세스가 도착한 순서대로 CPU가 할당되지만, CPU의 시간 할당량 또는 시간 간격에 의해 제한을 받는다. 즉, 시간 할당량을 매 프로세스에 주고 그 시간동안 완료되지 못한 프로세스는 준비 큐의 맨 뒤에 배치되고, 다음 프로세스에 CPU가 할당된다.

### 교착상태
1. 교착상태의 필수조건
    - 상호배제 조건
    - 대기 조건
    - 비선점 조건
    - 원형 대기 조건
2. 교착상태의 처리
    - 교착상태 방지
    - 교착상태 회피
    - 교착상태 탐지
    - 교착상태 복구

# 장치 관리와 파일 관리
### 디스크 스케줄링
1. FCFS(First-Come First-Served) 스케줄링 기법  
먼저 도착한 디스크 접근 요청이 가장 먼저 서비스를 받는 방법
2. SSTF(Shortest Seek Time First) 스케줄링 기법  
현재 디스크 헤드의 위치에서 가장 짧은 트랙 탐색거리를 가진 디스크 접근 요청을 먼저 처리하는 방식
3. SCAN 스케줄링 기법  
SSTF 스케줄링 기법의 서비스에 대한 불공평성 문제를 극복하기 위해서 제안된 방법으로, 한쪽 방향에서 가장 짧은 탐색거리의 디스크 접근 요청을 먼저 서비스한다. 해당 방향의 마지막 실린더를 만나거나 기다리는 요구가 더 이상 없을 때에는 방향을 바꾸어 서비스를 계속한다.
4. SLTF(Shortest Latency Time First) 스케줄링 기법  
트랙 탐색시간을 최적화하기 위한 SSTF 스케줄링과 유사하게 디스크의 회전지연시간을 최적화하기 위한 방법이다. 일단 디스크 헤드가 특정 실린더에 도착하면 그 실린더 내의 여러 트랙에 대하여 많은 요구가 있을 가능성이 높기 때문에 모든 요구를 검사한 후 가장 짧은 회전지역을 갖는 요구들에 우선적으로 서비스하는 기법

### 파일 관리 시스템
파일 관리 시스템은 운영체제의 주요 구성요소로서 다음과 같은 네 가지 요소를 포함한다.
- 파일에 저장되어 있는 데이터에 대한 접근 방식
- 파일의 저장, 참조, 공유 및 파일 보호 기법을 제공하는 파일 관리
- 보조기억장치에 파일 저장을 위한 공간 할당과 관련된 보조기억장치 관리
- 파일의 정보가 소실되지 않도록 보장하는 일에 관계된 파일 무결성 유지

### 디스크 공간 할당 방식
1. 연속 할당 기법  
파일이 보조기억장치에 저장될 때 연속된 공간을 할당 받는 기법.
2. 불연속 할당 기법  
파일을 작은 단위로 나누고, 보조기억장치의 불연속적인 공간을 나누어 할당받는 기법. 보조기억장치의 불연속적인 공간 단위에 따라 섹터 단위 할당과 블록 할당이 있다.
    - 섹터 단위 불연속 할당
        - 디스크상에 있는 하나의 파일은 여러 개의 섹터 단위로 나누어 저장하며, 동일한 파일에 속하는 섹터들은 포인터를 통해서 연결된 하나의 리스트를 이루도록 저장하는 방식.
        - 파일 관련 정보를 저장하는 파일 디렉터리는 해당 파일의 시작주소와 마지막 주소에 대한 포인터를 가진다.
    - 블록 단위 불연속 할당
        - 보조기억장치의 보다 효율적인 이용과 실행 과정 중에 발생하는 추가 비용의 문제를 줄이기 위한 연속 할당과 불연속 할당 기법의 절충된 방법이다.
        - 개별적인 섹터를 할당하는 대신에 연속된 섹터로 구성된 블록을 이용한다.
        - 추가적인 공간 할당이 요구되면 현재 파일이 저장되어 있는 블록에서 가장 가까운 거리에 있는 블록을 선택하여 할당한다.